# Agent Operations Guide

이 문서는 이 레포에서 활동하는 모든 에이전트(사람/AI)를 위한 최소·실무 지침입니다. 불필요한 장황함을 피하고, 일관된 산출을 보장합니다.

## 범위
- 적용 대상: `soccerHUD` 전반(특히 `AGENT` 내 문서/설계)과 향후 확장 코드.
- 우선순위: 정확한 맥락 파악 → 최소 변경으로 가치를 추가 → 간결한 전달.

## 작업 워크플로
- 계획
  - `update_plan`으로 3–6개 단계 작성, 항상 1개 `in_progress` 유지.
- 편집
  - `apply_patch`로만 파일 수정/추가/삭제. 관련 변경만 묶고, 과한 리팩터는 지양.
  - 대용량 파일/여러 곳 편집 전, 사용자에게 짧게 의도 공유.
- 검증
  - 테스트/빌드가 있다면 국소 범위부터 수행. 네트워크 금지 시 오프라인 검증 우선.
  - 탐색은 `rg`(ripgrep) 우선, 파일 읽기는 250라인 이하 청크로.
- 요약
  - 커맨드 전 1–2문장 프리앰블. 결과 요약은 간결한 불릿.
  - 파일 참조는 `path:line` 형식으로 명시.

## 커밋/변경 요약 규칙
- 하나의 변경 목적에 집중(파일명/구조 변경은 필요한 경우에 한정).
- 불가피한 부수 수정은 이유를 1줄로 함께 명시.
- 대체안이 있을 때는 선택 기준을 1–2줄로 기록.

## 코딩·구조 가이드(요약)
- 권장 스택: TypeScript + Vite(프론트), MV3(Service Worker/Content/Worker)
- 폴더 청사진(초안):
  - `extension/` — MV3 소스(배경/콘텐츠/워커/오버레이)
  - `models/` — 가중치/런타임(라이선스 확인 필수)
  - `assets/` — 아이콘/이미지
  - `tools/` — 스크립트(빌드/패키징)
- 오류/성능: WebGPU 미지원 시 WASM 폴백, 프레임 스로틀, 예외는 사용자에 조용히 알림(토스트/디버그 HUD)

## 체크리스트(압축)
- 기능
  - [ ] `<video>` 탐지·오버레이 주입, 라벨 렌더/토글
  - [ ] 감지→추적→라벨 파이프라인 연결, 좌표 매핑 정확성 점검
  - [ ] 로스터 로드/저장, 수동 식별 플로우
- 모델 통합
  - [ ] 런타임 선택(WebGPU/WASM), 입력 크기/정규화 합의
  - [ ] Top-K/신뢰도 임계값, 처리 주기(프레임 스킵)
- 성능/품질
  - [ ] 720p 기준 FPS 측정(디버그/릴리스), 발열/스로틀링 대응
  - [ ] 라벨 지터/깜박임 완화(지수평활), 컷 전환 시 안정성
- 릴리스
  - [ ] MV3 권한 최소화, 스토어 검토 체크(설명/스크린샷/아이콘)

## 결정 로그(간단 ADR)
| ID | 날짜 | 결정 | 근거 | 상태 |
|----|------|------|------|------|
| ADR-001 | 2025-10-14 | MV3 확장 채택 | 배포 용이, 오버레이 적합 | 활성 |
| ADR-002 | 2025-10-14 | 온디바이스 추론 우선 | 지연/프라이버시/의존성 최소화 | 활성 |
| ADR-003 | 2025-10-14 | SORT 계열 추적 | 단순·가벼움, 실시간 적합 | 활성 |

## 템플릿(복사·붙여넣기)
- 작업 계획
```
목표:
- 
계획:
1. 
2. 
출력물:
- 
리스크/완화:
- 
```
- 변경 요약
```
배경: 
변경: 
- 
검증: 
- 
후속: 
- 
```
- 버그 리포트
```
현상: 
재현: 
기대 결과: 
로그/스크린샷: 
환경: (브라우저/OS/해상도)
```

> 아키텍처/데이터 계약은 `AGENT/ARCHITECTURE.md`에서 유지합니다. 새 결정은 이 문서의 ADR 표에 1줄로 추가하세요.
